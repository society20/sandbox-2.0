<h1>Edit computer</h1>
<form id="editForm">
	<fieldset>
		<input type="hidden" name="_id" value="{{_id}}" />
		<div class="clearfix ">
			<label for="name">Computer name</label>
			<div class="input">
				<input type="text" id="name" name="name" value="{{name}}" >
				<span class="help-inline">Required</span>
			</div>
		</div>
		<div class="clearfix ">
			<label for="introduced">Introduced date</label>
			<div class="input">
				<input type="text" id="introduced" name="introduced" value="{{introduced}}" >
				<span class="help-inline">Date ('yyyy-MM-dd')</span>
			</div>
		</div>
		<div class="clearfix ">
			<label for="discontinued">Discontinued date</label>
			<div class="input">
				<input type="text" id="discontinued" name="discontinued" value="{{discontinued}}" >
				<span class="help-inline">Date ('yyyy-MM-dd')</span>
			</div>
		</div>
		<div class="clearfix ">
			<label for="company">Company</label>
			<div class="input">
				<select id="companyId" name="company._id" >
					<option value="none">Choose a value</option>
					<option value="4f817c9ce837a77dbe51e25f">Apple Inc.</option>
					<option value="4f817c9ce837a77dbe51e260">Thinking Machines</option>
					<option value="4f817c9ce837a77dbe51e261">RCA</option>
					<option value="4f817c9ce837a77dbe51e262">Netronics</option>
					<option value="4f817c9ce837a77dbe51e263">Tandy Corporation</option>
					<option value="4f817c9ce837a77dbe51e264">Commodore International</option>
					<option value="4f817c9ce837a77dbe51e265">MOS Technology</option>
					<option value="4f817c9ce837a77dbe51e266">Micro Instrumentation and Telemetry Systems</option>
					<option value="4f817c9ce837a77dbe51e267">IMS Associates</option>
					<option value="4f817c9ce837a77dbe51e268">Digital Equipment Corporation</option>
					<option value="4f817c9ce837a77dbe51e269">Lincoln Laboratory</option>
					<option value="4f817c9ce837a77dbe51e26a">Moore School of Electrical Engineering</option>
					<option value="4f817c9ce837a77dbe51e26b">IBM</option>
					<option value="4f817c9ce837a77dbe51e26c">Amiga Corporation</option>
					<option value="4f817c9ce837a77dbe51e26d">Canon</option>
					<option value="4f817c9ce837a77dbe51e26e">Nokia</option>
					<option value="4f817c9ce837a77dbe51e26f">Sony</option>
					<option value="4f817c9ce837a77dbe51e270">OQO</option>
					<option value="4f817c9ce837a77dbe51e271">NeXT</option>
					<option value="4f817c9ce837a77dbe51e272">Atari</option>
					<option value="4f817c9ce837a77dbe51e273">Acorn computer</option>
					<option value="4f817c9ce837a77dbe51e274">Timex Sinclair</option>
					<option value="4f817c9ce837a77dbe51e275">Nintendo</option>
					<option value="4f817c9ce837a77dbe51e276">Sinclair Research Ltd</option>
					<option value="4f817c9ce837a77dbe51e277">Xerox</option>
					<option value="4f817c9ce837a77dbe51e278">Hewlett-Packard</option>
					<option value="4f817c9ce837a77dbe51e279">Zemmix</option>
					<option value="4f817c9ce837a77dbe51e27a">ACVS</option>
					<option value="4f817c9ce837a77dbe51e27b">Sanyo</option>
					<option value="4f817c9ce837a77dbe51e27c">Cray</option>
					<option value="4f817c9ce837a77dbe51e27d">Evans &amp; Sutherland</option>
					<option value="4f817c9ce837a77dbe51e27e">E.S.R. Inc.</option>
					<option value="4f817c9ce837a77dbe51e27f">OMRON</option>
					<option value="4f817c9ce837a77dbe51e280">BBN Technologies</option>
					<option value="4f817c9ce837a77dbe51e281">Lenovo Group</option>
					<option value="4f817c9ce837a77dbe51e282">ASUS</option>
					<option value="4f817c9ce837a77dbe51e283">Amstrad</option>
					<option value="4f817c9ce837a77dbe51e284">Sun Microsystems</option>
					<option value="4f817c9ce837a77dbe51e285">Texas Instruments</option>
					<option value="4f817c9ce837a77dbe51e286">HTC Corporation</option>
					<option value="4f817c9ce837a77dbe51e287">Research In Motion</option>
					<option value="4f817c9ce837a77dbe51e288">Samsung Electronics</option>
				</select>
				<span class="help-inline">&nbsp;</span>
			</div>
		</div>
	</fieldset>
	<div class="actions">
		<input type="submit" value="Save this computer" class="btn primary" id="saveEdit">
		or <a class="btn" id="cancelEdit">Cancel</a>
	</div>
</form>
<form action="/computers/json/delete/{{_id}}" method="POST" class="topRight">
	<input type="submit" value="Delete this computer" class="btn danger">
</form>
<script>
    $("#saveEdit").click(function(event) {
        var formAsObject = $("#editForm").toObject();
        var computerAsJson = JSON.stringify(formAsObject);
        update("{{_id}}", computerAsJson);
        show("#main");
        event.preventDefault();
    });
    $("#cancelEdit").click(function(event) {
        show("#main");
        event.preventDefault();
    });
    //selects the company linked with the computer being edited
    {{#company._id}}
    	$("#companyId option[value='{{company._id}}']").attr('selected', 'selected');
    {{/company._id}}
</script>